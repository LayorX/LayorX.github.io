<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Â•≥Á•ûË£ΩÈÄ†ÊâÄ</title>
    
    <!-- Â§ñÈÉ®Ë≥áÊ∫ê -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="gstyle.css">
    
</head>
<body>
    <!-- ËÉåÊôØ Canvas -->
    <canvas id="background-canvas"></canvas>

    <!-- ËºâÂÖ•Áï´Èù¢ -->
    <div id="loading-overlay">
        <canvas id="loading-canvas"></canvas>
        <div id="loading-content">
             <div class="silhouette-container"></div>
            <h2 id="loading-text" class="text-2xl font-bold text-gray-300 mt-4"></h2>
        </div>
    </div>

    <!-- ÂΩàÂá∫Ë¶ñÁ™ó (Modals) -->
    <div id="image-modal" class="modal">
        <div id="image-modal-content" class="modal-content"><img id="modal-image" src="" alt="ÊîæÂ§ßÈ†êË¶Ω"></div>
    </div>
    <div id="story-modal" class="modal">
        <div id="story-modal-content" class="modal-content">
            <h2 id="story-modal-title" class="text-2xl font-bold text-center mb-4 bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-violet-500"></h2>
            <div id="story-text" class="text-lg leading-relaxed mb-6 min-h-[100px]"></div>
            <div id="tts-controls" class="text-center space-x-4">
                <button id="tts-btn" class="btn-base btn-primary text-white font-bold py-2 px-6 rounded-full"></button>
                <button id="tts-stop-btn" class="btn-base btn-secondary text-white font-bold py-2 px-6 rounded-full" style="display: none;"></button>
            </div>
            <p id="tts-limit-info" class="text-xs text-gray-500 mt-2 text-center" style="display: none;"></p>
        </div>
    </div>
    <div id="slideshow-modal" class="modal">
        <div id="slideshow-container">
            <div id="favorites-empty-state">
                <p class="text-2xl mb-4">üíî</p>
                <p></p>
                <p class="text-sm text-gray-500"></p>
            </div>
            <img id="slideshow-image" src="">
            <button id="slideshow-prev" class="slideshow-nav">&lt;</button>
            <button id="slideshow-next" class="slideshow-nav">&gt;</button>
            <div id="slideshow-top-controls">
                <button id="slideshow-unfavorite" class="slideshow-control-btn">üíî</button>
                <button id="slideshow-close" class="slideshow-control-btn">&times;</button>
            </div>
        </div>
        <div id="thumbnail-bar"></div>
    </div>
    <div id="gacha-modal" class="modal">
        <div class="gacha-content modal-content">
            <button id="gacha-close-btn" class="gacha-close-btn">&times;</button>
            <h2 id="gacha-modal-title" class="text-3xl font-bold text-center mb-4 bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-600"></h2>
            <div id="gacha-result-container" class="gacha-result-container">
                <div class="gacha-placeholder">
                    <p class="text-6xl mb-4">?</p>
                    <p></p>
                </div>
            </div>
            <div class="gacha-controls">
                <button id="gacha-draw-btn" class="btn-base btn-primary text-white font-bold py-3 px-8 rounded-full text-xl"> (Ââ©È§ò <span id="gacha-count">5</span> Ê¨°)</button>
                <p id="gacha-unlock-info" class="text-xs text-gray-500 mt-2" style="display: none;"></p>
            </div>
        </div>
    </div>
    <div id="contact-modal" class="modal">
        <div id="contact-modal-content" class="modal-content"></div>
    </div>
    <div id="apikey-modal" class="modal">
        <div id="apikey-modal-content" class="modal-content"></div>
    </div>
     <div id="coming-soon-modal" class="modal">
        <div id="coming-soon-modal-content" class="modal-content"></div>
    </div>
    
    <!-- TTS Êí≠ÊîæÂô® -->
    <audio id="tts-audio"></audio>

    <!-- ‰∏ªË¶ÅÂÖßÂÆπÂÆπÂô® -->
    <div class="main-container">
        <div class="top-right-controls">
            <button id="sound-control">
                <svg id="sound-on-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                <svg id="sound-off-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;"><path d="M11 5L6 9H2v6h4l5 5V5z"></path><path d="M23 9l-6 6M17 9l6 6"></path></svg>
            </button>
        </div>

        <!-- È†ÇÈÉ®Âõ∫ÂÆöÊ®ôÈ†≠ -->
        <header class="sticky-header">
            <div class="container mx-auto px-4">
                <div class="text-center flex justify-center items-center gap-4">
                    <button id="theme-switch-btn" class="theme-switch">
                        <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                        <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    </button>
                    <h1 id="header-title" class="text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-violet-500 mb-2">
                    </h1>
                </div>
                <!-- ÊåâÈàïÂÆπÂô® -->
                <div class="flex flex-wrap justify-center items-center gap-2 md:gap-4 my-4">
                    <button id="generate-one-btn" class="btn-base btn-primary text-white font-bold py-2 px-6 rounded-full text-lg"></button>
                    <button id="generate-four-btn" class="btn-base btn-secondary text-white font-bold py-2 px-6 rounded-full text-lg"></button>
                    <button id="favorites-btn" class="btn-base btn-primary text-white font-bold py-2 px-6 rounded-full text-lg"><span id="favorites-btn-text"></span> ‚ù§Ô∏è <span id="favorites-count">0</span></button>
                    <button id="gacha-btn" class="btn-base btn-secondary text-white font-bold py-2 px-6 rounded-full text-lg"></button>
                    
                    <!-- ‚ú® FIX: Êõ¥Â§öÈÅ∏È†ÖÊåâÈàï (ÁßªÂà∞Êâ≠ËõãÊåâÈàïÂè≥ÈÇä) -->
                    <div class="relative" id="more-options-container">
                        <button id="more-options-btn" class="btn-base btn-secondary text-white font-bold py-2 px-4 rounded-full text-lg flex items-center">
                            Êõ¥Â§öÈÅ∏È†Ö <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="more-options-menu" class="absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-50 hidden">
                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
                                <a href="#" id="about-btn" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" role="menuitem">ÈóúÊñº‰ΩúÂìÅ</a>
                                <a href="#" id="contact-btn" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" role="menuitem">ËÅØÁµ°Êàë (Â†±ÈåØ„ÄÅÂª∫Ë≠∞)</a>
                                <a href="#" id="apikey-btn" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" role="menuitem">ÂåØÂÖ• Gemini API Key</a>
                                <a href="#" id="extra-gacha-btn" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" role="menuitem">È°çÂ§ñÊâ≠ËõãÊ¨°Êï∏ +3</a>
                            </div>
                        </div>
                    </div>
                </div>
                <nav id="tab-navigation" class="flex justify-center border-b border-gray-700"></nav>
                 <div id="user-info" class="text-center text-xs text-gray-500 py-1"></div>
            </div>
        </header>
        
        <!-- È¢®Ê†ºÂÖßÂÆπÂçÄÂ°ä -->
        <main id="style-sections" class="container mx-auto px-4"></main>
    </div>
    
    <!-- Ë®äÊÅØÊèêÁ§∫Ê°Ü -->
    <div id="message-box"></div>

    <footer id="app-footer"></footer>

    <script type="module" src="gmain.js"></script>
</body>
</html>
