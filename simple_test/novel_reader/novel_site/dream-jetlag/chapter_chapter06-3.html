<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6-3ï¼šå¯æ¨‚å‘³çš„å¤¢å¢ƒè©¦ç…‰ - å¤¢å¢ƒæ™‚å·®ï¼šä¸ƒå°è¬ä¿¡</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography,aspect-ratio"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA and SEO -->
    <meta name="theme-color" content="#f8fafc">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    
    <!-- ç”¨æ–¼éµç›¤å°è¦½ -->
    <link rel="prev" href="chapter_chapter06-2.html">
    <link rel="next" href="chapter_chapter06-4.html">
    <style>
        :root {
            --font-sans: 'Inter', sans-serif;
            --font-serif: 'Noto Serif TC', serif;
            
            /* è‰²å½©ä¸»é¡Œ */
            --bg-paper: #f8fafc; --text-paper: #334155; --border-paper: #e2e8f0; --link-paper: #475569; --active-bg-paper: #e2e8f0; --icon-fill-paper: #64748b;
            --bg-sepia: #f4f0e8; --text-sepia: #5f4b32; --border-sepia: #e9dec9; --link-sepia: #8a5a44; --active-bg-sepia: #e9dec9; --icon-fill-sepia: #5f4b32;
            --bg-night: #0f172a; --text-night: #94a3b8; --border-night: #334155; --link-night: #94a3b8; --active-bg-night: #1e293b; --icon-fill-night: #94a3b8;
        }

        .theme-paper { --bg-main: var(--bg-paper); --text-main: var(--text-paper); --border-main: var(--border-paper); --link-main: var(--link-paper); --active-bg-main: var(--active-bg-paper); --icon-fill: var(--icon-fill-paper); }
        .theme-sepia { --bg-main: var(--bg-sepia); --text-main: var(--text-sepia); --border-main: var(--border-sepia); --link-main: var(--link-sepia); --active-bg-main: var(--active-bg-sepia); --icon-fill: var(--icon-fill-sepia); }
        .theme-night { --bg-main: var(--bg-night); --text-main: var(--text-night); --border-main: var(--border-night); --link-main: var(--link-night); --active-bg-main: var(--active-bg-night); --icon-fill: var(--icon-fill-night); }
        
        body { font-family: var(--font-sans); background-color: var(--bg-main); color: var(--text-main); transition: background-color 0.4s ease, color 0.4s ease; }
        
        .prose { font-family: var(--font-serif); color: var(--text-main); }
        .prose p { font-size: 1.125rem; line-height: 2; letter-spacing: 0.05em; transition: font-size 0.3s ease; }
        .prose h1, .prose h2, .prose h3 { font-family: var(--font-sans); color: var(--text-main); }
        
        .theme-switcher-btn svg, .setting-btn svg { fill: var(--icon-fill); transition: fill 0.3s ease; }
        .theme-switcher-btn:hover svg, .setting-btn:hover svg, .theme-switcher-btn.active svg { fill: var(--text-main); }

        .nav-btn { font-family: var(--font-sans); color: var(--link-main); padding: 0.5rem 1rem; border-radius: 0.5rem; transition: background-color 0.3s, color 0.3s; font-weight: 500; }
        .nav-btn:hover { background-color: var(--active-bg-main); color: var(--text-main); }

        /* é¸å–®èˆ‡æ²è»¸æ¨£å¼ */
        #menu-toggle:checked ~ #menu { transform: translateX(0); }
        #menu-toggle:checked ~ label[for="menu-toggle"] { opacity: 1; pointer-events: auto; }
        #sidebar, #menu, #content-container { scrollbar-width: thin; scrollbar-color: var(--border-main) transparent; }
        #sidebar::-webkit-scrollbar, #menu::-webkit-scrollbar, #content-container::-webkit-scrollbar { width: 5px; }
        #sidebar::-webkit-scrollbar-track, #menu::-webkit-scrollbar-track, #content-container::-webkit-scrollbar-track { background: transparent; }
        #sidebar::-webkit-scrollbar-thumb, #menu::-webkit-scrollbar-thumb, #content-container::-webkit-scrollbar-thumb { background-color: var(--border-main); border-radius: 20px; }

        /* å´é‚Šæ¬„æ”¶åˆå‹•ç•« */
        #sidebar { transition: margin-left 0.3s ease-in-out; }
        .sidebar-collapsed #sidebar { margin-left: -18rem; } /* w-72 */
        @media (min-width: 1024px) { .sidebar-collapsed #sidebar { margin-left: -20rem; } } /* lg:w-80 */
        
        .sub-nav-container { max-height: 1000px; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        .sub-nav-container.hidden { max-height: 0; }
        
        /* å­—é«”å¤§å°æ¨£å¼ */
        .font-size-sm .prose p { font-size: 1rem; }
        .font-size-md .prose p { font-size: 1.125rem; }
        .font-size-lg .prose p { font-size: 1.25rem; }

        /* å­—é«”é¢¨æ ¼æ¨£å¼ */
        .font-family-serif .prose { font-family: var(--font-serif); }
        .font-family-sans .prose { font-family: var(--font-sans); }
        .font-family-sans .prose p { letter-spacing: 0.025em; } /* éè¥¯ç·šå­—é«”å¾®èª¿å­—è· */

    </style>
</head>
<body class="theme-paper font-size-md font-family-serif" data-novel-id="dream-jetlag">

    <!-- é–±è®€é€²åº¦æ¢ -->
    <div id="progress-bar-container" class="fixed top-0 left-0 w-full h-1 z-20">
        <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-150" style="width: 0%;"></div>
    </div>

    <div id="app-container" class="flex h-screen bg-[var(--bg-main)] overflow-hidden">
        <!-- å´é‚Šæ¬„/ç›®éŒ„ (æ¡Œé¢ç‰ˆ) -->
        <aside id="sidebar" class="hidden md:flex flex-col w-72 lg:w-80 bg-transparent border-r border-[var(--border-main)] flex-shrink-0">
            <div class="p-4 border-b border-[var(--border-main)] flex-shrink-0">
                <a href="../index.html" class="flex items-center gap-2 text-[var(--link-main)] hover:text-[var(--text-main)] transition-colors duration-300 font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                    è¿”å›æ›¸åº«
                </a>
            </div>
            <div class="flex-1 p-4 overflow-y-auto">
                <div class="aspect-w-3 aspect-h-4 mb-4"><img src="cover.jpg" alt="å¤¢å¢ƒæ™‚å·®ï¼šä¸ƒå°è¬ä¿¡ å°é¢" class="w-full h-full object-cover rounded-lg shadow-md"></div>
                <h2 class="text-xl font-bold mb-4 text-[var(--text-main)]">å¤¢å¢ƒæ™‚å·®ï¼šä¸ƒå°è¬ä¿¡</h2>
                <nav id="chapter-list">
                    <a href="chapter_chapter00.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">ğŸ“–åºç« ï¼šã€Šå“‡å“‡å“‡ï¼å¥‡äººç•°äº‹ï¼ã€‹å•Ÿå‹•ï¼</a>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter01-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬ä¸€ç« ï¼šã€Šä»–åœ¨å¤¢è£¡å­¸å®Œäº† MIT å››å¹´èª²ç¨‹ã€‹å¤¢å‰µå”åŒï¼</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter01-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter01-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">1-1ï¼šã€å“‡å“‡å“‡ï¼å¥‡äººç•°äº‹ï¼ã€‘å¤¢å‰µå”åŒ Ep1</a><a href="chapter_chapter01-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">1-2ï¼šç¬¬ä¸€å°ä¿¡</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter02-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬äºŒç« ï¼šã€Šæ›´å¤§çš„æµé‡ï¼Œæ›´å¤§çš„å±éšªã€‹ç•™è¨€!</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter02-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter02-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">2-1ï¼šæ·±æµ·å·¨æ€ª</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter03-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬ä¸‰ç« ï¼šã€Šè¼¿è«–çš„æ¼©æ¸¦ï¼Œå¤¢å¢ƒçš„åŠ å¯†ã€‹è¨—å¤¢ï¼</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter03-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter03-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-1ï¼šç™¼ç‡’å½±ç‰‡</a><a href="chapter_chapter03-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-2ï¼šå¤¢å‰µå”åŒ Ep2 - ç¬¬ä¸€å€‹è­‰æ“š</a><a href="chapter_chapter03-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-3ï¼šé»‘æ›¸å·è»¸</a><a href="chapter_chapter03-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-4ï¼šæ—è§€è€…</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter04-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬å››ç« ï¼šã€Šé è¨€è€…çš„å›è²ï¼Œèˆ‡ç˜‹ç‹‚çš„å•Ÿå‹•ï¼ã€‹</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter04-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter04-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-1ï¼šç…ç†¬çš„ç­‰å¾…</a><a href="chapter_chapter04-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-2ï¼šå¤¢å‰µå”åŒ Ep3 - é è¨€è€…çš„å›è²</a><a href="chapter_chapter04-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-3ï¼š D.I.R.E</a><a href="chapter_chapter04-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-4ï¼šä¸‰ç™¼é è¨€</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter05-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬äº”ç« ï¼šã€Šç•¶ä¿¡çœ¾ç‹‚ç†±ï¼ä¿¡ä»»çš„è£‚ç—•ï¼ã€‹</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter05-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter05-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-1ï¼šç•¶é è¨€æˆçœŸï¼Œææ‡¼æ‰çœŸæ­£é–‹å§‹ã€‚</a><a href="chapter_chapter05-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-2ï¼šæ•¸ä½ç‹©çµï¼šç•¶è¨Šæ¯æˆç‚ºæ­¦å™¨</a><a href="chapter_chapter05-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-3ï¼šæ²‰é»˜çš„ä»£åƒ¹ï¼Œå¦‚æœæˆ‘ä¸æ˜¯æˆ‘</a><a href="chapter_chapter05-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-4ï¼šå¤¢çš„å…¥å£ï¼Œç™¾å¼µåºŠ</a><a href="chapter_chapter05-5.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-5ï¼šå…ˆé‹’å¤¢å”è€…:ç‹¸ã€ç†Šã€å…”ã€é´‰</a><a href="chapter_chapter05-6.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-6ï¼šé›™é‡é€£å¤¢ï¼šåœ¨å¤¢ä¸­æŠµé”é€²éš</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter06-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬å…­ç« ï¼šã€Šå¸«çˆºé§•åˆ°ï¼Œå…¨å“¡æ’¤é€€ï¼ã€‹</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 rotate-90" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter06-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 ">
                    <a href="chapter_chapter06-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-1ï¼šå¸«çˆºçš„ç¾èº«</a><a href="chapter_chapter06-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-2ï¼šç¬¬å››å°ä¿¡</a><a href="chapter_chapter06-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 bg-[var(--active-bg-main)] font-bold text-[var(--text-main)]">6-3ï¼šå¯æ¨‚å‘³çš„å¤¢å¢ƒè©¦ç…‰</a><a href="chapter_chapter06-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-4ï¼šOçš„å­¤è»å¥®æˆ°</a><a href="chapter_chapter06-5.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-5ï¼šè¨ˆç•«ä»£è™Ÿï¼šFLASH</a><a href="chapter_chapter06-6.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-6ï¼šä¼‘é–€èˆ‡ç”Ÿé–€</a><a href="chapter_chapter06-7.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-7ï¼šFLASHï¼</a><a href="chapter_chapter06-8.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-8 ï¼šé¦–çˆ¾å°é–ï¼Œå¤¢å¢ƒé¤˜æ³¢</a><a href="chapter_chapter06-9.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-9ï¼šå››è™Ÿå®‰å…¨å±‹</a></div></div><a href="letter_letter1.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬ä¸€å°ä¿¡ã€Šä»–åœ¨å¤¢è£¡å­¸å®Œäº† MIT å››å¹´èª²ç¨‹ã€‹</a><a href="letter_letter2.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬äºŒå°ä¿¡ã€Šä¾†è‡ªå¤¢å¢ƒçš„åŠ å¯†è¨Šæ¯ã€‹</a><a href="letter_letter3.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬äºŒå°ä¿¡ã€Šé è¨€çš„è¿´éŸ¿ã€‹</a><a href="letter_letter4.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬å››å°ä¿¡ã€Šå¤¢å¢ƒçš„çŸ›èˆ‡ç›¾ã€‹</a>
                </nav>
            </div>
        </aside>
        
        <!-- ä¸»è¦å…§å®¹å€ -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <header class="bg-transparent p-4 flex justify-between items-center z-10 flex-shrink-0">
                <div class="flex items-center gap-2">
                    <button id="sidebar-toggle-btn" class="hidden md:block p-2 rounded-full hover:bg-[var(--active-bg-main)]" title="æ”¶åˆ/å±•é–‹ç›®éŒ„">
                        <svg id="sidebar-toggle-icon" class="w-6 h-6 text-[var(--icon-fill)] transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/></svg>
                    </button>
                    <label for="menu-toggle" id="menu-btn" class="md:hidden p-2 rounded-full hover:bg-[var(--active-bg-main)] text-[var(--text-main)] cursor-pointer transition-colors">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--icon-fill)"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/></svg>
                    </label>
                </div>
                <div class="flex items-center text-center">
                    <h1 class="text-base font-medium text-[var(--text-main)] opacity-70 truncate mx-4">6-3ï¼šå¯æ¨‚å‘³çš„å¤¢å¢ƒè©¦ç…‰</h1>
                    <span id="progress-percent" class="text-sm font-mono text-[var(--icon-fill)] w-12 text-left">0%</span>
                </div>
                <div class="flex items-center space-x-1">
                    <!-- è¨­å®šæŒ‰éˆ• -->
                    <div class="relative">
                        <button id="setting-toggle-btn" class="setting-btn p-2 rounded-full hover:bg-[var(--active-bg-main)] transition-colors" title="é–±è®€è¨­å®š">
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" /></svg>
                        </button>
                        <!-- è¨­å®šé¢æ¿ -->
                        <div id="setting-panel" class="hidden absolute right-0 mt-2 w-48 bg-[var(--bg-main)] rounded-lg shadow-lg border border-[var(--border-main)] p-4 z-20">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-[var(--text-main)] mb-2">å­—é«”å¤§å°</label>
                                <div class="flex justify-between items-center">
                                    <button data-action="set-font-size" data-value="sm" class="setting-option-btn">å°</button>
                                    <button data-action="set-font-size" data-value="md" class="setting-option-btn">ä¸­</button>
                                    <button data-action="set-font-size" data-value="lg" class="setting-option-btn">å¤§</button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[var(--text-main)] mb-2">å­—é«”é¢¨æ ¼</label>
                                <div class="flex justify-between items-center">
                                    <button data-action="set-font-family" data-value="serif" class="setting-option-btn">è¥¯ç·š</button>
                                    <button data-action="set-font-family" data-value="sans" class="setting-option-btn">éè¥¯ç·š</button>
                                </div>
                            </div>
                        </div>
                         <style>.setting-option-btn { padding: 4px 12px; border-radius: 999px; font-size: 0.875rem; background-color: transparent; border: 1px solid var(--border-main); color: var(--link-main); transition: all 0.2s; } .setting-option-btn.active, .setting-option-btn:hover { background-color: var(--active-bg-main); color: var(--text-main); border-color: var(--link-main); }</style>
                    </div>
                    <button onclick="setTheme('paper')" class="theme-switcher-btn p-2 rounded-full hover:bg-[var(--active-bg-main)] transition-colors" title="æ—¥é–“æ¨¡å¼"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.02-.39-1.41 0l-1.42 1.42c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l1.42-1.42c.39-.39.39-1.02 0-1.41zm13.42 13.42c-.39-.39-1.02-.39-1.41 0l-1.42 1.42c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l1.42-1.42c.39-.39.39-1.02 0-1.41zM20.42 5.99c.39-.39.39-1.02 0-1.41l-1.42-1.42c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.42 1.42c.39.39 1.02.39 1.41 0zM4.58 19.41c.39-.39.39-1.02 0-1.41l-1.42-1.42c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.42 1.42c.39.39 1.02.39 1.41 0z"/></svg></button>
                    <button onclick="setTheme('sepia')" class="theme-switcher-btn p-2 rounded-full hover:bg-[var(--active-bg-main)] transition-colors" title="æ‡·èˆŠæ¨¡å¼"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z"/></svg></button>
                    <button onclick="setTheme('night')" class="theme-switcher-btn p-2 rounded-full hover:bg-[var(--active-bg-main)] transition-colors" title="å¤œé–“æ¨¡å¼"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.64-.11 2.4-.31-.3-.13-.59-.29-.87-.48-.69-.48-1.29-1.12-1.72-1.85C11.23 17.5 11 16.78 11 16c0-2.21 1.79-4 4-4 .78 0 1.5.23 2.15.62.73.43 1.37 1.03 1.85 1.72.19.28.35.57.48.87.2-.76.31-1.57.31-2.4 0-4.97-4.03-9-9-9z"/></svg></button>
                </div>
            </header>
            
            <div id="content-container" class="flex-1 relative overflow-y-auto">
                <!-- æ‰‹æ©Ÿç‰ˆå½ˆå‡ºèœå–® -->
                <input type="checkbox" id="menu-toggle" class="hidden"/>
                <div id="menu" class="md:hidden fixed inset-0 bg-[var(--bg-main)] p-0 w-72 h-full shadow-lg transition-transform duration-300 ease-in-out transform -translate-x-full z-30 flex flex-col">
                    <div class="p-4 border-b border-[var(--border-main)] flex-shrink-0">
                         <a href="../index.html" class="flex items-center gap-2 text-[var(--link-main)] hover:text-[var(--text-main)] transition-colors duration-300 font-medium">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                            è¿”å›æ›¸åº«
                        </a>
                    </div>
                    <div class="flex-1 p-4 overflow-y-auto">
                        <h2 class="text-xl font-bold mb-4 text-[var(--text-main)]">å¤¢å¢ƒæ™‚å·®ï¼šä¸ƒå°è¬ä¿¡</h2>
                        <nav id="mobile-chapter-list">
                            <a href="chapter_chapter00.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">ğŸ“–åºç« ï¼šã€Šå“‡å“‡å“‡ï¼å¥‡äººç•°äº‹ï¼ã€‹å•Ÿå‹•ï¼</a>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter01-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬ä¸€ç« ï¼šã€Šä»–åœ¨å¤¢è£¡å­¸å®Œäº† MIT å››å¹´èª²ç¨‹ã€‹å¤¢å‰µå”åŒï¼</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter01-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter01-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">1-1ï¼šã€å“‡å“‡å“‡ï¼å¥‡äººç•°äº‹ï¼ã€‘å¤¢å‰µå”åŒ Ep1</a><a href="chapter_chapter01-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">1-2ï¼šç¬¬ä¸€å°ä¿¡</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter02-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬äºŒç« ï¼šã€Šæ›´å¤§çš„æµé‡ï¼Œæ›´å¤§çš„å±éšªã€‹ç•™è¨€!</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter02-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter02-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">2-1ï¼šæ·±æµ·å·¨æ€ª</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter03-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬ä¸‰ç« ï¼šã€Šè¼¿è«–çš„æ¼©æ¸¦ï¼Œå¤¢å¢ƒçš„åŠ å¯†ã€‹è¨—å¤¢ï¼</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter03-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter03-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-1ï¼šç™¼ç‡’å½±ç‰‡</a><a href="chapter_chapter03-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-2ï¼šå¤¢å‰µå”åŒ Ep2 - ç¬¬ä¸€å€‹è­‰æ“š</a><a href="chapter_chapter03-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-3ï¼šé»‘æ›¸å·è»¸</a><a href="chapter_chapter03-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">3-4ï¼šæ—è§€è€…</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter04-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬å››ç« ï¼šã€Šé è¨€è€…çš„å›è²ï¼Œèˆ‡ç˜‹ç‹‚çš„å•Ÿå‹•ï¼ã€‹</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter04-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter04-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-1ï¼šç…ç†¬çš„ç­‰å¾…</a><a href="chapter_chapter04-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-2ï¼šå¤¢å‰µå”åŒ Ep3 - é è¨€è€…çš„å›è²</a><a href="chapter_chapter04-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-3ï¼š D.I.R.E</a><a href="chapter_chapter04-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">4-4ï¼šä¸‰ç™¼é è¨€</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter05-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬äº”ç« ï¼šã€Šç•¶ä¿¡çœ¾ç‹‚ç†±ï¼ä¿¡ä»»çš„è£‚ç—•ï¼ã€‹</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter05-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 hidden">
                    <a href="chapter_chapter05-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-1ï¼šç•¶é è¨€æˆçœŸï¼Œææ‡¼æ‰çœŸæ­£é–‹å§‹ã€‚</a><a href="chapter_chapter05-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-2ï¼šæ•¸ä½ç‹©çµï¼šç•¶è¨Šæ¯æˆç‚ºæ­¦å™¨</a><a href="chapter_chapter05-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-3ï¼šæ²‰é»˜çš„ä»£åƒ¹ï¼Œå¦‚æœæˆ‘ä¸æ˜¯æˆ‘</a><a href="chapter_chapter05-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-4ï¼šå¤¢çš„å…¥å£ï¼Œç™¾å¼µåºŠ</a><a href="chapter_chapter05-5.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-5ï¼šå…ˆé‹’å¤¢å”è€…:ç‹¸ã€ç†Šã€å…”ã€é´‰</a><a href="chapter_chapter05-6.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">5-6ï¼šé›™é‡é€£å¤¢ï¼šåœ¨å¤¢ä¸­æŠµé”é€²éš</a></div></div>
                        <div>
                            <button data-toggle-target="sub-nav-chapter_chapter06-html" class="chapter-toggle-btn w-full block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 flex justify-between items-center text-left text-[var(--link-main)] ">
                                <span>ğŸ“–ç¬¬å…­ç« ï¼šã€Šå¸«çˆºé§•åˆ°ï¼Œå…¨å“¡æ’¤é€€ï¼ã€‹</span>
                                <svg class="chevron-icon w-4 h-4 transition-transform duration-200 flex-shrink-0 rotate-90" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                            </button>
                            <div id="sub-nav-chapter_chapter06-html" class="sub-nav-container mt-1 space-y-1 border-l-2 border-[var(--border-main)] pl-3 ml-4 ">
                    <a href="chapter_chapter06-1.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-1ï¼šå¸«çˆºçš„ç¾èº«</a><a href="chapter_chapter06-2.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-2ï¼šç¬¬å››å°ä¿¡</a><a href="chapter_chapter06-3.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 bg-[var(--active-bg-main)] font-bold text-[var(--text-main)]">6-3ï¼šå¯æ¨‚å‘³çš„å¤¢å¢ƒè©¦ç…‰</a><a href="chapter_chapter06-4.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-4ï¼šOçš„å­¤è»å¥®æˆ°</a><a href="chapter_chapter06-5.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-5ï¼šè¨ˆç•«ä»£è™Ÿï¼šFLASH</a><a href="chapter_chapter06-6.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-6ï¼šä¼‘é–€èˆ‡ç”Ÿé–€</a><a href="chapter_chapter06-7.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-7ï¼šFLASHï¼</a><a href="chapter_chapter06-8.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-8 ï¼šé¦–çˆ¾å°é–ï¼Œå¤¢å¢ƒé¤˜æ³¢</a><a href="chapter_chapter06-9.html" class="chapter-link block p-2 rounded-md text-sm hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">6-9ï¼šå››è™Ÿå®‰å…¨å±‹</a></div></div><a href="letter_letter1.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬ä¸€å°ä¿¡ã€Šä»–åœ¨å¤¢è£¡å­¸å®Œäº† MIT å››å¹´èª²ç¨‹ã€‹</a><a href="letter_letter2.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬äºŒå°ä¿¡ã€Šä¾†è‡ªå¤¢å¢ƒçš„åŠ å¯†è¨Šæ¯ã€‹</a><a href="letter_letter3.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬äºŒå°ä¿¡ã€Šé è¨€çš„è¿´éŸ¿ã€‹</a><a href="letter_letter4.html" class="chapter-link block p-3 rounded-md hover:bg-[var(--active-bg-main)] transition-colors duration-200 text-[var(--link-main)]">âœ‰ï¸ ç¬¬å››å°ä¿¡ã€Šå¤¢å¢ƒçš„çŸ›èˆ‡ç›¾ã€‹</a>
                        </nav>
                    </div>
                </div>
                <label for="menu-toggle" class="md:hidden fixed inset-0 bg-black bg-opacity-25 z-20 opacity-0 pointer-events-none transition-opacity duration-300 cursor-pointer"></label>

                <article id="content-area" class="p-6 md:p-12 prose max-w-2xl mx-auto">
                    <h1 class="text-3xl md:text-4xl font-bold mb-2 !text-[var(--text-main)] text-center">6-3ï¼šå¯æ¨‚å‘³çš„å¤¢å¢ƒè©¦ç…‰</h1>
                    <p class="text-lg italic text-[var(--text-main)] opacity-75 mt-2 mb-10 text-center font-serif">#é†’ä¾†ï¼Œæ˜¯ç‚ºäº†å†æ¬¡å…¥ç¡ã€‚</p>
                    <p class="mb-6 leading-loose tracking-wide">ã€Œæº–å‚™å¥½äº†å—ï¼Ÿã€ç‹ç‹¸çœ‹è‘—è€åº¦ã€‚</p><p class="mb-6 leading-loose tracking-wide">è€åº¦é»äº†é»é ­ã€‚</p><p class="mb-6 leading-loose tracking-wide">æ–°çš„åŸºåœ°å…§ï¼Œå››å¼µè¡Œè»åºŠä¸¦æ’æ“ºæ”¾ã€‚ç™½å…”åƒå€‹å°è—¥å¸«ï¼Œè¹¦è¹¦è·³è·³åœ°æ‹¿ä¾†å››ç“¶çœ‹èµ·ä¾†åƒæ˜¯å¯æ¨‚çš„æ·±è‰²æ¶²é«”ã€‚
ã€Œå˜¿å˜¿ï¼Œé€™æ¬¡æ˜¯å¯æ¨‚å‘³æ¶²æ…‹èˆ’ç·©åŠ‘å”·ï¼èƒ½å¹«åŠ©èº«é«”æ›´å¿«é”åˆ°å®Œå…¨æ”¾é¬†ï¼ã€å¥¹è¸®èµ·è…³å°–ï¼Œå°‡å…¶ä¸­ä¸€ç“¶éçµ¦è€åº¦
ã€Œä½ å…ˆå–ï¼Œç„¶å¾Œæƒ³è¾¦æ³•é€²å…¥å¤¢å¢ƒã€‚é€™æ¬¡çš„ã€å¤¢å£ã€ï¼Œå°±éº»ç…©è¨­å®šæˆä½ è·Ÿè€Kå¤§å­¸æ™‚å¸¸å»çš„é‚£å®¶ç¶²å’–å§ï¼å°±åƒæˆ‘å€‘å‰›å‰›è¨è«–çš„å ´æ™¯ï¼Œç¶²å’–ç•«é¢é€™ç¨®å……æ»¿çœŸå¯¦ç•«é¢çš„å ´æ™¯ï¼Œæˆ‘å¾ˆå¥½é€²è¡Œã€é€£å¤¢ã€çš„ï¼ã€
å¥¹å°è€åº¦æ¯”äº†å€‹å¤§å¤§çš„è®šã€‚</p><p class="mb-6 leading-loose tracking-wide">éš¨å¾Œï¼Œç™½å…”è‡ªå·±ä¹Ÿä¸€é£²è€Œç›¡ï¼Œå°ç‹ç‹¸èªªï¼šã€Œå§Šï½é€™å€‹å ´æ™¯å¦³æ‡‰è©²ä¹Ÿæ²’å•é¡Œå§ï¼Ÿä¸è¡Œçš„è©±æˆ‘å¹³æ¿è£¡é‚„æœ‰3Då»ºæ¨¡åœ–ï¼Œå¦³å¯ä»¥å†å¤šçœ‹ä¸€ä¸‹å”·ï½ã€èªªå®Œä¾¿ç·©ç·©é–‰ä¸Šçœ¼ã€‚</p><p class="mb-6 leading-loose tracking-wide">çƒé´‰å†·å“¼ä¸€è²ï¼šã€Œç™½å…”ä¸€ç›´èªªè©±ä¸ç´¯å—ï¼Ÿã€ä»–å°‡æ‰‹ä¸­å·²ç¶“è§£é–‹çš„é­”æ–¹è·Ÿå–å®Œçš„ç©ºç“¶ä¸€ä½µæ”¾åœ¨æ¡Œä¸Šï¼Œéš¨å¾Œè¶´åœ¨æ¡Œä¸Šç¡å»ã€‚</p><p class="mb-6 leading-loose tracking-wide">ç‹ç‹¸çµ¦äº†é»‘ç†Šä¸€å€‹å …å®šä¸”è¨—ä»˜çš„çœ¼ç¥ï¼šã€Œæˆ‘å€‘çš„èº«é«”ï¼Œå°±äº¤çµ¦ä½ å®ˆè­·äº†ï¼Œè¾›è‹¦äº†ã€‚å¦‚æœç™¼ç”Ÿä»»ä½•æ„å¤–ï¼Œè¨˜å¾—åŸ·è¡Œæ–¹æ¡ˆZã€‚ã€
é»‘ç†Šä¼¸å‡ºçµå¯¦çš„æ‰‹è‡‚ï¼Œç”¨æ‹³é ­è·Ÿç‹ç‹¸çš„æ‹³é ­è¼•è¼•ç¢°äº†ä¸€ä¸‹ï¼Œç©©é‡åœ°èªªï¼šã€Œæ²’å•é¡Œã€‚ã€</p><p class="mb-6 leading-loose tracking-wide">ã€ç¬¬ä¸€å±¤å¤¢å¢ƒï¼šæ„›å¾·è¯ç¶²å’–ã€‘</p><p class="mb-6 leading-loose tracking-wide">è€åº¦çš„æ„è­˜é€æ¼¸æ¸…æ™°ï¼Œå‘¨é­çš„ç’°å¢ƒè®Šå¾—ç„¡æ¯”ç†Ÿæ‚‰ã€‚ç©ºæ°£ä¸­ç€°æ¼«è‘—æ·¡æ·¡çš„è¸è‰å‘³ã€æ³¡éºµçš„é¦™æ°£ï¼Œä»¥åŠä¸»æ©Ÿæ•£ç™¼å‡ºçš„ç†±æ°£ã€‚è€³é‚Šæ˜¯æ»‘é¼ æ¸…è„†çš„é»æ“Šè²èˆ‡éµç›¤çš„æ•²æ“Šè²ï¼Œçœ¼å‰æ˜¯æ•´æ’é–ƒçˆè‘—éŠæˆ²ç•«é¢çš„CRTè¢å¹•ã€‚
é€™æ˜¯ä»–å’Œè€Kå¤§å­¸æ™‚ä»£çš„è–åœ°â€”â€”ã€Œæ„›å¾·è¯ç¶²å’–ã€ã€‚å°±åœ¨ä»–æ²‰æµ¸åœ¨å›æ†¶ä¸­æ™‚ï¼Œç•«é¢ç¬é–“è®Šå¾—æ´»æ½‘èµ·ä¾†ã€‚</p><p class="mb-6 leading-loose tracking-wide">æ—é‚Šåƒåœ¾æ¡¶è£¡çš„è¡›ç”Ÿç´™åœ˜çªç„¶é•·å‡ºè€³æœµï¼Œè®Šæˆä¸€éš»éš»ç´™å…”å­ï¼Œè¹¦è¹¦è·³è·³åœ°è·‘é–‹ã€‚æ•´å€‹ç¶²å’–çš„å¯«å¯¦ç•«é¢¨ç¬é–“è¢«æ¸²æŸ“æˆç«¥è¶£å¯æ„›çš„é¢¨æ ¼ã€‚</p><p class="mb-6 leading-loose tracking-wide">ç™½å…”çš„èº«å½±å¾ä¸€å°ä¸»æ©Ÿå¾Œæ¢å‡ºé ­ä¾†ï¼Œç¬‘å˜»å˜»åœ°èªªï¼šã€Œé€£ç·šæˆåŠŸï¼è€åº¦å¤§å¤§ï¼Œæº–å‚™å¥½å›‰ï¼ã€</p><p class="mb-6 leading-loose tracking-wide">å¥¹æ‰“äº†å€‹éŸ¿æŒ‡ï¼Œå‘¨åœå†°å†·çš„é›»ç«¶æ¤…ç¬é–“è®ŠæˆæŸ”è»Ÿçš„éµé»ƒè‰²é›»ç«¶æ²™ç™¼ã€‚ä¸€è‚¡æš–æ„èˆ‡å®‰å¿ƒæ„ŸåŒ…åœäº†è€åº¦ï¼Œé€™æ˜¯ç‹ç‹¸çš„ã€Œæ‰˜å¤¢ã€æ„å¿µï¼Œåœ¨å¼•å°ä»–æ”¾é¬†æˆ’å‚™ï¼Œæ²‰å…¥æ›´æ·±çš„ç¡çœ ã€‚</p><p class="mb-6 leading-loose tracking-wide">è€åº¦çš„çœ¼çš®è®Šå¾—æ²‰é‡ï¼Œæ„è­˜ç·©ç·©ä¸‹æ²‰ï¼Œé€²å…¥äº†ç¬¬äºŒå±¤å¤¢å¢ƒã€‚</p><p class="mb-6 leading-loose tracking-wide">ã€ç¬¬äºŒå±¤å¤¢å¢ƒï¼šçƒé´‰çš„é»‘æ£®æ—ã€‘</p><p class="mb-6 leading-loose tracking-wide">å¢œè½æ„Ÿè¥²ä¾†ã€‚</p><p class="mb-6 leading-loose tracking-wide">ç•¶è€åº¦å†æ¬¡çœçœ¼ï¼Œä»–èº«è™•ä¸€ç‰‡é»‘æ¼†æ¼†çš„æ£®æ—ä¸­ã€‚æ¯èçš„æ¨¹æå¼µç‰™èˆçˆªåœ°ä¼¸å‘å¤©ç©ºï¼Œåœ°ä¸Šæ»¿æ˜¯è…çˆ›çš„è½è‘‰ã€‚å¹¾éš»çƒé´‰ç«™åœ¨æé ­ï¼Œç™¼å‡ºæ²™å•çš„å«è²ï¼Œè²éŸ³åœ¨å¯‚éœçš„æ£®æ—ä¸­è¿´ç›ªï¼Œé¡¯å¾—æ ¼å¤–åˆºè€³ã€‚</p><p class="mb-6 leading-loose tracking-wide">é€™æ˜¯çƒé´‰çš„ã€Œå¤¢å¢ƒæµ®æ°´å°ã€ã€‚</p><p class="mb-6 leading-loose tracking-wide">çªç„¶ï¼Œæ£®æ—ä¸­éŸ¿èµ·äº†ç„¡æ•¸ç«Šç«Šç§èªï¼Œé‚£äº›åœ¨ç¶²è·¯ä¸Šæ”»æ“Šä»–çš„ç•™è¨€å…·è±¡åŒ–æˆä¸€åœ˜åœ˜é»‘è‰²çš„æ€ªç‰©ï¼Œå¾æ¨¹å½±ä¸­æ¹§å‡ºã€‚
ã€Œâ€¦â€¦å‡ç¥çš„ä»£è¨€äººâ€¦â€¦ã€
ã€Œâ€¦â€¦èƒŒå›è€…ï¼Œé‚„æˆ‘çœŸç›¸â€¦â€¦ã€
ã€Œâ€¦â€¦ä½ åšçš„ä¸€åˆ‡éƒ½æ˜¯å‡çš„ï¼Œéƒ½æ˜¯ç‚ºäº†æµé‡â€¦â€¦ã€
é€™äº›è²éŸ³ç›´æ“Šè€åº¦å…§å¿ƒæœ€è„†å¼±çš„éƒ¨åˆ†ï¼Œè®“ä»–ç”¢ç”Ÿå¼·çƒˆçš„è‡ªæˆ‘æ‡·ç–‘ã€‚</p><p class="mb-6 leading-loose tracking-wide">ã€ç¾å¯¦ä¸–ç•Œï¼šé˜²è­·å±‹ã€‘</p><p class="mb-6 leading-loose tracking-wide">ã€Œæƒ…æ³ä¸å°ï¼ã€é»‘ç†Šä½å¼ä¸€è²ï¼Œä»–çš„è¦–ç·šç·Šç›¯è‘—èººåœ¨åºŠä¸Šçš„è€åº¦ã€‚</p><p class="mb-6 leading-loose tracking-wide">åªè¦‹è€åº¦çš„èº«é«”æ­£åœ¨ä¸æ–·å†’æ±—ï¼Œé–‹å§‹å‡ºç¾éœé›»ç¾è±¡ï¼Œè€åº¦çš„é ­é«®å…¨éƒ¨éƒ½å¾€ä¸Šæµ®èµ·ã€‚é€™æ˜¯ç²¾ç¥åœ¨åº•å±¤å¤¢å¢ƒè¿·å¤±ï¼Œå³å°‡èˆ‡ç¾å¯¦æ–·é–‹é€£çµçš„å¾µå…†â€”â€”æ¤ç‰©äººåŒ–çš„å‰å…† ã€‚
ä¸”é€™å€‹ç¾è±¡ä¸æ®µæ“´æ•£ï¼Œçƒé´‰çš„é ­é«®ä¹Ÿé–‹å§‹æœ‰éœé›»åæ‡‰ï¼Œç™½å…”ä¹Ÿé–‹å§‹å†’æ±—äº†...</p><p class="mb-6 leading-loose tracking-wide">é»‘ç†Šæ­£æº–å‚™å¾æ€¥æ•‘ç®±ä¸­æ‹¿å‡ºæ–¹æ¡ˆZçš„ç‰¹è£½è‡ªå‹•é«”å¤–å¿ƒè‡Ÿé™¤é¡«å™¨ (AED) âš¡ï¼Œç‹ç‹¸å»æŠ¬æ‰‹åˆ¶æ­¢äº†ä»–ã€‚å¥¹é›–ç„¶é–‰è‘—çœ¼ï¼Œä½†çœ‰é ­ç·Šé–ã€‚
ã€Œç©©ä½â€¦è€åº¦â€¦è¨˜ä½ä½ çš„ã€è­˜æ¨™ã€â€¦ã€å¥¹ç”¨ã€Œæ‰˜å¤¢ã€çš„æ–¹å¼ï¼Œå°‡è‡ªå·±çš„æ„å¿µåŒ–ä½œä¸€é“å¾®å¼±ä½†æ¸…æ™°çš„è²éŸ³ï¼Œå‚³å…¥è€åº¦çš„æ½›æ„è­˜æ·±è™•ã€‚</p><p class="mb-6 leading-loose tracking-wide">ã€ç¬¬äºŒå±¤å¤¢å¢ƒï¼šçƒé´‰çš„é»‘æ£®æ—ã€‘</p><p class="mb-6 leading-loose tracking-wide">åœ¨å³å°‡è¢«çµ•æœ›åå™¬çš„ç¬é–“ï¼Œè€åº¦çš„è…¦æµ·ä¸­éŸ¿èµ·äº†ç‹ç‹¸çš„è²éŸ³ã€‚
ã€Œè­˜æ¨™â€¦æˆ‘çš„è­˜æ¨™â€¦ã€ä»–å–ƒå–ƒè‡ªèªã€‚
ä»–æƒ³èµ·äº†è‡ªå·±è¨­å®šçš„é‚£å€‹ã€Œæ¸…æ˜è­˜æ¨™ã€â€”â€”ã€Œå˜—è©¦åœ¨å¤¢ä¸­å‘¼å«è€Kï¼Œå¦‚æœè€Kçš„åæ§½ä¸åˆé‚è¼¯ï¼Œé‚£å°±æ˜¯å¤¢ã€‚ã€</p><p class="mb-6 leading-loose tracking-wide">ä»–å°è‘—å‘¨é­çš„æ€ªç‰©å¤§å–Šï¼šã€Œè€Kï¼ä½ èªªå¥è©±å•Šï¼ã€</p><p class="mb-6 leading-loose tracking-wide">ä¸€å€‹ç”±é»‘æ³¥æ§‹æˆçš„ã€Œè€Kã€æ€ªç‰©è •å‹•è‘—æˆå½¢ï¼Œç”¨ä¸€ç¨®å¹³æ¿çš„èªæ°£èªªï¼šã€Œè€åº¦ï¼Œä½ åšå¾—å¾ˆå°ï¼Œæˆ‘å€‘æ‡‰è©²ä¿æŒå†·éœèˆ‡æ²‰é»˜ã€‚ã€</p><p class="mb-6 leading-loose tracking-wide">ã€Œä¸å°ï¼ã€è€åº¦ç¬é–“æ¸…é†’ï¼Œã€Œè€Kæ‰ä¸æœƒé€™éº¼èªªï¼ä»–æœƒèªªï¼šã€å¹¹ï¼è€åº¦ä½ æ…«å±å•Šï¼ç›´æ¥é–‹ç›´æ’­è·Ÿä»–å€‘å¹¹åˆ°åº•å•Šï¼ã€ã€</p><p class="mb-6 leading-loose tracking-wide">è©±éŸ³å‰›è½ï¼Œä»–å…§å¿ƒçš„è¿·èŒ«ä¸€æƒè€Œç©ºã€‚å¼·å¤§çš„ä¿¡å¿µåŒ–ç‚ºåŠ›é‡ï¼Œå‘¨é­çš„é»‘æ£®æ—èˆ‡æ€ªç‰©å¦‚ç»ç’ƒèˆ¬å¯¸å¯¸ç¢è£‚ï¼Œéœ²å‡ºäº†åº•ä¸‹ç´”ç™½çš„å¤¢å¢ƒåŸºåº•ã€‚</p><p class="mb-6 leading-loose tracking-wide">çƒé´‰çš„èº«å½±å‡ºç¾åœ¨ä¸é è™•ï¼Œä»–è‡‰ä¸Šå¸¶è‘—ä¸€çµ²éŒ¯æ„•èˆ‡è®šè¨±çš„è¤‡é›œè¡¨æƒ…ã€‚
ã€Œâ€¦â€¦å“¼ï¼Œé‚„ç®—â€¦æœ‰é»æ„æ€ã€‚ã€</p><p class="mb-6 leading-loose tracking-wide">è€åº¦æˆåŠŸäº†ï¼Œä»–é€šéäº†ç¬¬ä¸€æ¬¡ç§»å¤¢ä¸–ç•Œæ”»æ“Šçš„æ¨¡æ“¬è©¦ç…‰äº†ã€‚</p><p class="mb-6 leading-loose tracking-wide">---</p>
                    <div class="flex justify-between mt-12 pt-6 border-t border-[var(--border-main)]"><a href="chapter_chapter06-2.html" id="prev-page-link" class="nav-btn">â† ä¸Šä¸€ç¯€</a><a href="chapter_chapter06-4.html" id="next-page-link" class="nav-btn">ä¸‹ä¸€ç¯€ â†’</a></div>
                </article>
            </div>
        </main>
    </div>

    <!-- æµ®å‹•åŠŸèƒ½æŒ‰éˆ• -->
    <div class="fixed bottom-6 right-6 z-20 flex flex-col gap-3">
        <button id="scroll-to-top" class="fab-btn hidden" title="å›åˆ°é ‚éƒ¨">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4l-8 8h5v8h6v-8h5l-8-8z"/></svg>
        </button>
        <button id="scroll-to-bottom" class="fab-btn" title="å‰å¾€åº•éƒ¨">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 20l8-8h-5V4h-6v8H4l8 8z"/></svg>
        </button>
    </div>
    <style>.fab-btn { background-color: var(--active-bg-main); color: var(--icon-fill); width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: all 0.3s ease; } .fab-btn:hover { transform: scale(1.1); box-shadow: 0 6px 16px rgba(0,0,0,0.15); }</style>
    
    <!-- ä¸Šæ¬¡é–±è®€ä½ç½®æç¤º -->
    <div id="last-read-toast" class="hidden fixed bottom-6 left-1/2 -translate-x-1/2 bg-[var(--bg-main)] text-[var(--text-main)] px-6 py-3 rounded-lg shadow-xl border border-[var(--border-main)] z-30 flex items-center gap-4">
        <p class="text-sm">è¦è·³è½‰è‡³ä¸Šæ¬¡é–±è®€çš„ä½ç½®å—ï¼Ÿ</p>
        <a id="last-read-link" href="#" class="font-bold text-blue-500 text-sm hover:underline">è·³è½‰</a>
        <button id="last-read-close" class="text-[var(--icon-fill)] hover:text-[var(--text-main)]">&times;</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const NOVEL_ID = document.body.dataset.novelId;
            const appContainer = document.getElementById('app-container');
            const contentContainer = document.getElementById('content-container');
            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('menu');
            const overlay = document.querySelector('label[for="menu-toggle"]');
            const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn');
            const sidebarToggleIcon = document.getElementById('sidebar-toggle-icon');
            const scrollToTopBtn = document.getElementById('scroll-to-top');
            const scrollToBottomBtn = document.getElementById('scroll-to-bottom');
            const progressBar = document.getElementById('progress-bar');
            const progressPercent = document.getElementById('progress-percent');
            const settingToggleBtn = document.getElementById('setting-toggle-btn');
            const settingPanel = document.getElementById('setting-panel');
            const lastReadToast = document.getElementById('last-read-toast');
            const lastReadLink = document.getElementById('last-read-link');
            const lastReadClose = document.getElementById('last-read-close');

            // --- ä¸»é¡Œè¨­å®š ---
            const setTheme = (theme) => {
                document.body.classList.remove('theme-paper', 'theme-sepia', 'theme-night');
                document.body.classList.add(`theme-${theme}`);
                localStorage.setItem('readingTheme', theme);
                document.querySelectorAll('.theme-switcher-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.getAttribute('onclick') === `setTheme('${theme}')`);
                });
            };

            // --- é–±è®€è¨­å®š (å­—é«”) ---
            const applyReadingSettings = () => {
                const settings = JSON.parse(localStorage.getItem('readingSettings')) || { size: 'md', family: 'serif' };
                
                document.body.classList.remove('font-size-sm', 'font-size-md', 'font-size-lg');
                document.body.classList.add(`font-size-${settings.size}`);
                
                document.body.classList.remove('font-family-serif', 'font-family-sans');
                document.body.classList.add(`font-family-${settings.family}`);

                // æ›´æ–°è¨­å®šé¢æ¿æŒ‰éˆ•ç‹€æ…‹
                document.querySelectorAll('[data-action="set-font-size"]').forEach(btn => btn.classList.toggle('active', btn.dataset.value === settings.size));
                document.querySelectorAll('[data-action="set-font-family"]').forEach(btn => btn.classList.toggle('active', btn.dataset.value === settings.family));
            };

            const saveReadingSetting = (key, value) => {
                const settings = JSON.parse(localStorage.getItem('readingSettings')) || { size: 'md', family: 'serif' };
                settings[key] = value;
                localStorage.setItem('readingSettings', JSON.stringify(settings));
                applyReadingSettings();
            };

            // --- åˆå§‹åŒ– ---
            const currentTheme = localStorage.getItem('readingTheme') || 'paper';
            setTheme(currentTheme);
            applyReadingSettings();

            // --- å´é‚Šæ¬„æ”¶åˆ ---
            const updateSidebarIcon = (isCollapsed) => {
                sidebarToggleIcon.style.transform = isCollapsed ? 'rotate(180deg)' : 'rotate(0deg)';
            };
            const isSidebarCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            if (isSidebarCollapsed) appContainer.classList.add('sidebar-collapsed');
            updateSidebarIcon(isSidebarCollapsed);

            sidebarToggleBtn.addEventListener('click', () => {
                const collapsed = appContainer.classList.toggle('sidebar-collapsed');
                localStorage.setItem('sidebarCollapsed', collapsed);
                updateSidebarIcon(collapsed);
            });

            // --- æ‰‹æ©Ÿé¸å–® ---
            menuToggle.addEventListener('change', function() {
                overlay.classList.toggle('opacity-0', !this.checked);
                overlay.classList.toggle('pointer-events-none', !this.checked);
            });
            overlay.addEventListener('click', () => {
                menuToggle.checked = false;
                menuToggle.dispatchEvent(new Event('change'));
            });
            mobileMenu.addEventListener('click', (e) => {
                if (e.target.closest('a')) {
                    menuToggle.checked = false;
                    menuToggle.dispatchEvent(new Event('change'));
                }
            });
            
            // --- ç›®éŒ„æ”¶åˆ ---
            const setupChapterToggles = (containerSelector) => {
                document.querySelector(containerSelector)?.addEventListener('click', (e) => {
                    const toggleBtn = e.target.closest('.chapter-toggle-btn');
                    if (toggleBtn) {
                        e.preventDefault();
                        const targetElement = document.getElementById(toggleBtn.dataset.toggleTarget);
                        targetElement?.classList.toggle('hidden');
                        toggleBtn.querySelector('.chevron-icon')?.classList.toggle('rotate-90');
                    }
                });
            };
            setupChapterToggles('#chapter-list');
            setupChapterToggles('#mobile-chapter-list');

            // --- é–±è®€é€²åº¦ & è¨˜æ†¶ä½ç½® ---
            let scrollTimeout;
            const lastReadStorageKey = `lastRead_${NOVEL_ID}`;

            contentContainer.addEventListener('scroll', () => {
                const scrollableHeight = contentContainer.scrollHeight - contentContainer.clientHeight;
                const scrollTop = contentContainer.scrollTop;
                const percent = scrollableHeight > 0 ? (scrollTop / scrollableHeight) * 100 : 0;
                
                progressBar.style.width = `${percent}%`;
                progressPercent.textContent = `${Math.round(percent)}%`;

                scrollToTopBtn.classList.toggle('hidden', scrollTop <= 200);

                // å„²å­˜é–±è®€ä½ç½® (å»¶é²åŸ·è¡Œä»¥é¿å…æ•ˆèƒ½å•é¡Œ)
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    const data = {
                        href: window.location.href,
                        scrollTop: scrollTop,
                        title: document.querySelector('h1').textContent
                    };
                    localStorage.setItem(lastReadStorageKey, JSON.stringify(data));
                }, 500);
            });

            // --- é é¢è¼‰å…¥æ™‚æª¢æŸ¥ä¸Šæ¬¡é–±è®€ä½ç½® ---
            const lastReadData = JSON.parse(localStorage.getItem(lastReadStorageKey));
            if (lastReadData) {
                if (lastReadData.href === window.location.href) {
                    // å¦‚æœæ˜¯åŒä¸€é ï¼Œç›´æ¥æ»¾å‹•
                    setTimeout(() => contentContainer.scrollTo({ top: lastReadData.scrollTop, behavior: 'smooth' }), 100);
                } else {
                    // å¦‚æœæ˜¯ä¸åŒé ï¼Œé¡¯ç¤ºæç¤º
                    lastReadLink.href = lastReadData.href;
                    lastReadToast.classList.remove('hidden');
                }
            }
            lastReadClose.addEventListener('click', () => lastReadToast.classList.add('hidden'));

            // --- æµ®å‹•æŒ‰éˆ• ---
            scrollToTopBtn.addEventListener('click', () => contentContainer.scrollTo({ top: 0, behavior: 'smooth' }));
            scrollToBottomBtn.addEventListener('click', () => contentContainer.scrollTo({ top: contentContainer.scrollHeight, behavior: 'smooth' }));
            
            // --- éµç›¤å°è¦½ ---
            document.addEventListener('keydown', (e) => {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                if (e.key === 'ArrowLeft') document.querySelector('link[rel="prev"]')?.href && (window.location.href = document.querySelector('link[rel="prev"]').href);
                if (e.key === 'ArrowRight') document.querySelector('link[rel="next"]')?.href && (window.location.href = document.querySelector('link[rel="next"]').href);
            });

            // --- è¨­å®šé¢æ¿ ---
            settingToggleBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                settingPanel.classList.toggle('hidden');
            });
            document.addEventListener('click', (e) => {
                if (!settingPanel.contains(e.target) && !settingToggleBtn.contains(e.target)) {
                    settingPanel.classList.add('hidden');
                }
            });
            settingPanel.addEventListener('click', (e) => {
                const btn = e.target.closest('[data-action]');
                if (btn) {
                    const { action, value } = btn.dataset;
                    if (action === 'set-font-size') saveReadingSetting('size', value);
                    if (action === 'set-font-family') saveReadingSetting('family', value);
                }
            });

            // --- PWA Service Worker Registration ---
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('./service-worker.js')
                        .then(registration => {
                            console.log('ServiceWorker registration successful with scope: ', registration.scope);
                        })
                        .catch(err => {
                            console.log('ServiceWorker registration failed: ', err);
                        });
                });
            }

            // ç‚º window ç¶å®šå…¨åŸŸäº‹ä»¶
            window.setTheme = setTheme;
        });
    </script>
</body>
</html>
